<div id="consent">

<h2>What do you think of this story?</h2>

<p>
This is a web-based experiment that asks people to read stories and answer simple questions. 
This story may involve moderate graphic content such as that found in newspaper articles. 
After reading the story, you will be asked to rate what you thought of the story through a visual scale. 
You'll also be asked some additional questions for verification purposes.
Participation takes between 5 and 10 minutes. 
</p>

<p>
Please enter your Amazon Worker Id. <strong>You may only complete this HIT once</strong> (subsequent completions will not be accepted):
<br>
<input type="text" name="workerId" size="30" />
</p>

<p>
<button id="consentYes" disabled="true" type="button">I Agree</button>
<button id="consentNo"  disabled="true" type="button">No Thanks</button>
</p>

</div>

<style>
</style>

<script> 
(function() {
  var data = {};

  experimentr.hideNext();

  d3.selectAll('input')
    .filter(function(d) { return this.name === 'workerId' ? this : null; })
    .on('keypress', function() { data.workerId = this.value; validate(); })
    .on('blur', function() { data.workerId = this.value; validate(); });

  d3.select('#consentYes')
    .on('click', experimentr.next);
  d3.select('#consentNo')
    .on('click', function() { console.log('you may close the window'); });

  function validate() {
    if( data.workerId ) {
      experimentr.addData(data);
      d3.select('#consentYes').attr('disabled', null);
      d3.select('#consentNo').attr('disabled', null);
    }
  }

}());
</script>
